<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Administración de Puntos</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <h1>Administración de Puntos</h1>
    
    <div class="form-container">
        <h2>Añadir/Editar Jugador</h2>
        <form id="player-form">
            <input type="text" id="playerName" placeholder="Nombre del Jugador" required>
            <input type="number" id="categoryA" placeholder="Puntos Categoría A" min="0" required>
            <input type="number" id="categoryB" placeholder="Puntos Categoría B" min="0" required>
            <button type="submit">Guardar Jugador</button>
        </form>
    </div>

    <div class="table-container">
        <h2>Lista de Jugadores</h2>
        <table id="admin-table">
            <thead>
                <tr>
                    <th>Nombre</th>
                    <th>Puntos A</th>
                    <th>Puntos B</th>
                    <th>Acciones</th>
                </tr>
            </thead>
            <tbody>
                </tbody>
        </table>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const form = document.getElementById('player-form');
            const playerNameInput = document.getElementById('playerName');
            const categoryAInput = document.getElementById('categoryA');
            const categoryBInput = document.getElementById('categoryB');
            const adminTableBody = document.querySelector('#admin-table tbody');

            // Cargar datos al inicio
            let players = JSON.parse(localStorage.getItem('players')) || [];
            renderTable();

            form.addEventListener('submit', (e) => {
                e.preventDefault();
                const newPlayer = {
                    name: playerNameInput.value,
                    points: {
                        categoryA: parseInt(categoryAInput.value),
                        categoryB: parseInt(categoryBInput.value)
                    }
                };
                
                // Actualiza un jugador si ya existe, si no, añade uno nuevo
                const playerIndex = players.findIndex(p => p.name === newPlayer.name);
                if (playerIndex > -1) {
                    players[playerIndex] = newPlayer;
                } else {
                    players.push(newPlayer);
                }

                localStorage.setItem('players', JSON.stringify(players));
                renderTable();
                form.reset();
            });

            function renderTable() {
                adminTableBody.innerHTML = '';
                players.forEach(player => {
                    const row = document.createElement('tr');
                    row.innerHTML = `
                        <td>${player.name}</td>
                        <td>${player.points.categoryA}</td>
                        <td>${player.points.categoryB}</td>
                        <td>
                            <button onclick="deletePlayer('${player.name}')">Eliminar</button>
                        </td>
                    `;
                    adminTableBody.appendChild(row);
                });
            }

            window.deletePlayer = (playerName) => {
                players = players.filter(p => p.name !== playerName);
                localStorage.setItem('players', JSON.stringify(players));
                renderTable();
            };
        });
    </script>
</body>
</html>
